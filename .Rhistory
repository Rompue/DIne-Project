names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 224:316){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 266:316){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 280:316){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 281:316){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 283:316){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 284:316){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 286:316){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 287:316){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 288:316){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
for (i in 63:100){
filename <- paste("./data/csvfiles/","Sheet", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(file = filename, skip = 6)
stuname[i,1] <- as.character(temp[2,1])
temp <- temp[11:((nrow(temp)-2)),]
temp <- temp[,2:5]
names(temp) <- c("Dine", "Share", "Type","Date")
temp[,2] <- as.numeric(temp[,2])
temp[,3] <- as.factor(temp[,3])
temp[,4] <- as.Date(temp[,4], format = "%m/%d/%Y")
write.csv(temp, paste("./data/tidydata/",as.character(i), ".csv", sep = ""))}
}
head(stuname,n=50)
library(dplyr)
install.packages("dplyr")
stuname$Index <- c(1:length(stuname[,1]))
stunamecheck <- stuname[!is.na(stuname[,1]),]
stunamecheck
stunamecheck[1,1] <- "学生：于"
stunamecheck <- stunamecheck[stuname[,1] !== "",]
stunamecheck <- stunamecheck[stuname[,1] != "",]
stunamecheck
stunamecheck <- stuname[!is.na(stuname[,1]),]
stunamecheck[1,1] <- "学生：于"
head(stunamecheck)
stunamecheck[1,1] <- "student"
head(stunamecheck)
dim(stunamecheck)
stunamecheck <- stunamecheck[stunamecheck[,1] != "",]
stunamecheck
library(dplyr)
stunamecheck[,1] <- gsub("学生： ","",stunamecheck[,1])
stunamecheck
?gsub
gsub("学生： ","",stunamecheck[,1])
grep("学生： ","",stunamecheck[,1])
grepl("学生： ","",stunamecheck[,1])
gsub(pattern = "学生： ",replacement = "",x = stunamecheck[,1])
gsub(pattern = ""学生： ",replacement = "",x = stunamecheck[,1])
gsub(pattern = "\"学生： ",replacement = "",x = stunamecheck[,1])
stunamecheck$number <- c(1:length(stunamecheck[,1]))
head(stunamecheck)
dir.create("./data/finaldata")
for (i in 1:length(stunamecheck[,1])){
filename <- paste("./data/tidydata/", as.character(stunamecheck[i,2]), ".csv", sep = "")
temp <- read.csv(filename)
pathname <- paste("./data/finaldata/", as.character(stunamecheck[i,3]), ".csv", sep = "")
write.csv(pathname)
}
count = 0
for (i in 1:284){
filename <- paste("./data/tidydata/", as.character(stunamecheck[i,2]), ".csv", sep = "")
if(file.exists()){
temp <- read.csv(filename)
count = count + 1
pathname <- paste("./data/finaldata/", as.character(count), ".csv", sep = "")
write.csv(pathname)
}
}
dir.create("./data/finaldata")
count = 0
for (i in 1:284){
filename <- paste("./data/tidydata/", as.character(i), ".csv", sep = "")
if(file.exists()){
temp <- read.csv(filename)
count = count + 1
pathname <- paste("./data/finaldata/", as.character(count), ".csv", sep = "")
write.csv(pathname)
}
}
count = 0
for (i in 1:284){
filename <- paste("./data/tidydata/", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(filename)
count = count + 1
pathname <- paste("./data/finaldata/", as.character(count), ".csv", sep = "")
write.csv(pathname)
}
}
pathname
write.csv(pathname)
count = 0
for (i in 1:284){
filename <- paste("./data/tidydata/", as.character(i), ".csv", sep = "")
if(file.exists(filename)){
temp <- read.csv(filename)
count = count + 1
pathname <- paste("./data/finaldata/", as.character(count), ".csv", sep = "")
write.csv(temp, pathname)
}
}
write.csv(as.data.frame(stunamecheck), "./data/namelist.csv")
namelist <- read.csv("./data/namelist.csv")
head(namelist, n = 20\)
head(namelist, n = 20\)
head(namelist, n = 20)
paste("temp", "1", sep = "")
paste("temp", "1", sep = "") <- c(1,2)
temp[1] <- as.data.frame(rep(5,20))
temp[2] <- as.data.frame(rep(4,20))
temp
multi[2] <- as.data.frame(rep(4,20))
for i in (1:20) {}
for i in (1:20) {}
for (i in 1:20){}
for (i in 1:20){ tempi <- i +2}
tempi
tempfile <- read.csv("./data/finaldata/200.csv")
head(tempfile)
tempfile <- read.csv("./data/finaldata/3.csv")
tempfile
for (i in 1:255){
filename <- paste("./data/finaldata/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename)
if (temp[1,6] == NA){
temp <- temp[3:length(temp[1,])]
write.csv(temp, filename)
}
}
dir.create("./data/finaldata2")
for (i in 1:255){
filename <- paste("./data/finaldata/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename)
if (temp[1,6] == NA){
temp <- temp[3:length(temp[1,])]
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
write.csv(temp, filename2)
}
}
dim(tempfile)
tempfile[1,6] == NA
tempfile[1,6] == <NA
tempfile[1,6] == <NA>
tempfile[1,6]
tempfile[1,3]
tempfile[1,3] == ""
for (i in 1:255){
filename <- paste("./data/finaldata/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename)
if (temp[1,3] == ""){
temp <- temp[3:length(temp[1,])]
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
write.csv(temp, filename2)
}
}
tempfile <- read.csv(filename2)
head(tempfile)
for (i in 1:255){
filename <- paste("./data/finaldata/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename)
if (temp[1,3] == ""){
temp <- temp[3:length(temp[1,]),]
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
write.csv(temp, filename2)
}
}
tempfile <- read.csv(filename2)
head(tempfile)
for (i in 1:255){
filename <- paste("./data/finaldata/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename)
if (temp[1,3] == ""){
temp <- temp[3:length(temp[1,]),]
temp <- temp[,3:6]
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
write.csv(temp, filename2)
}
}
tempfile <-  read.csv(filename2)
head(tempfile)
for (i in 1:255){
filename <- paste("./data/finaldata/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename)
if (temp[1,3] == ""){
temp <- temp[3:length(temp[1,]),]
temp <- temp[,3:6]
temp$Share <- temp$Share - 1
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
write.csv(temp, filename2)
}
}
tempfile <-  read.csv(filename2)
head(tempfile)
foodlist <- as.list(NA)
for (i in 1:255){
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename2)
temp <- as.list(unique(temp[,2]))
foodlist <- as.list(unique(as.list(c(foodlist, temp))))
}
foodlist <- as.list(NA)
for (i in 2:255){
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename2)
temp <- as.list(unique(temp[,2]))
foodlist <- as.list(unique(as.list(c(foodlist, temp))))
}
tempfile <- read.csv("./data/finaldata/1.csv")
head(tempfile)
for (i in 1:255){
filename <- paste("./data/finaldata/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename)
if (temp[1,3] == ""){
temp <- temp[3:length(temp[1,]),]
temp <- temp[,3:6]
temp$Share <- temp$Share - 1
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
write.csv(temp, filename2)
}
else {
filename <- paste("./data/finaldata/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename)
temp <- temp[,3:6]
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
write.csv(temp, filename2)
}
}
foodlist <- as.list(NA)
for (i in 2:255){
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename2)
temp <- as.list(unique(temp[,2]))
foodlist <- as.list(unique(as.list(c(foodlist, temp))))
}
foodlist
length(foodlist)
class(foodlist)
foodlist <- as.data.frame(foodlist)
dim(foodlist)
head(foodlist)
head(foodlist, n =1)
View(foodlist)
foodlist <- as.list(foodlist)
length(foodlist)
View(foodlist)
foodlist[2]
uniquefood <- unique(foodlist)
class(uniquefood)
uniquefood[[2]]
uniquefood[[10]]
uniquefood[[11]]
uniquefood[[21]]
class(uniquefood[[2]])
which(foodlist == 肉包子)
uniquefood[[1:200]]
uniquefood[[c(1:200)]]
foodlistcsv <- as.data.frame(as.matrix(foodlist,1,974))
write.csv(foodlistcsv,"foodlist.csv")
write.csv(temp."temp.csv")
write.csv(temp,"temp.csv")
filename2 <- paste("./data/finaldata2/", as.character(2), ".csv", sep = "")
temp <- read.csv(filename2)
head(temp)
head(temp[,2])
temp[,2] <- as.character(temp[,2])
head(temp[,2])
unique(temp[,2])
temp[,2]
as.data.frame(temp[,2])
unique(as.data.frame(temp[,2]))
unique(as.list(temp[,2]))
as.data.frame(unique(as.list(temp[,2])))
foodlist <- as.data.frame(NA)
foodlist
filename2 <- paste("./data/finaldata2/", as.character(2), ".csv", sep = "")
temp <- read.csv(filename2)
temp[,2] <- as.character(temp[,2])
uniquetemp <- as.data.frame(temp[,2])
uniquetemp
filename2 <- paste("./data/finaldata2/", as.character(2), ".csv", sep = "")
temp <- read.csv(filename2)
temp[,2] <- as.character(temp[,2])
uniquetemp <- unique(as.data.frame(temp[,2]))
uniquetemp
foodlist <- unique(rbind(foodlist, uniquetemp))
rbind(foodlist,uniquetemp)
?rbind
names(foodlist) <- "temp[,2"
names(foodlist) <- "temp[, 2]"
rbind(foodlist,uniquetemp)
filename2 <- paste("./data/finaldata2/", as.character(2), ".csv", sep = "")
temp <- read.csv(filename2)
temp[,2] <- as.character(temp[,2])
uniquetemp <- unique(as.data.frame(temp[,2]))
foodlist <- unique(rbind(foodlist, uniquetemp))
foodlist
foodlist <- as.data.frame(NA)
names(foodlist) <- "temp[, 2]"
for (i in 2:255){
filename2 <- paste("./data/finaldata2/", as.character(i), ".csv", sep = "")
temp <- read.csv(filename2)
temp[,2] <- as.character(temp[,2])
uniquetemp <- unique(as.data.frame(temp[,2]))
foodlist <- unique(rbind(foodlist, uniquetemp))
}
dim(foodlist)
foodlist
write.csv(foodlist, "./data/foodlist.csv")
library(dplyr)
grep("(套)$", foodlist[,1])
grep("(套)$", foodlist[,1])
grep("(套)$", foodlist)
grep("<NA>$", foodlist)
foodlisttemp <- foodlist
foodlisttemp[2,1] <- "ab"
grep("b$", foodlisttemp[,1])
grep("面$", foodlisttemp[,1])
foodlist <- read.csv("./data/foodlist.csv")
head(foodlist)
classifiedfoodlist <- foodlist
typeone <- grep("-tao$", classifiedfoodlist[,2])
typeone <- classifiedfoodlist[typeone, ]
head(typeone)
names(foodlist) <- c("namechi", "nameeng")
foodlist <- read.csv("./data/foodlist.csv")
head(foodlist)
names(foodlist) <- c("namechi", "nameeng")
classifiedfoodlist <- foodlist
typeone <- grep("-tao$", classifiedfoodlist[,2])
typeone <- classifiedfoodlist[typeone, ]
head(typeone)
typetwo <- grep("mian$", classifiedfoodlist[,2])
typetwo <- classifiedfoodlist[typetwo, ]
typethree <- grep("mianbao", classifiedfoodlist[,2])
typethree <- classifiedfoodlist[typethree, ]
head(typetwo)
head(typethree)
typethree
typethree <- grep("mianbao$", classifiedfoodlist[,2])
typethree <- classifiedfoodlist[typethree, ]
head(typethree)
typethree
typethree <- grep("mianbao$ | mianbao$", classifiedfoodlist[,2])
typethree <- classifiedfoodlist[typethree, ]
typethree
typethree <- grep("mianbao|dangao$", classifiedfoodlist[,2])
typethree <- classifiedfoodlist[typethree, ]
head(typethree)
typethree
typetwo
typeone
?which
notype <- classifiedfoodlist[-c(typeone, typetwo, typethree), ]
notype <- classifiedfoodlist[c(-typeone, -typetwo, -typethree), ]
notype <- classifiedfoodlist[-typethree, ]
typethree
typeone <- grep("-tao$", classifiedfoodlist[,2])
typetwo <- grep("mian$", classifiedfoodlist[,2])
typethree <- grep("mianbao|dangao$", classifiedfoodlist[,2])
notype <- classifiedfoodlist[c(-typeone, -typetwo, -typethree), ]
notype
typeonein <- grep("-tao$", classifiedfoodlist[,2])
typeone <- classifiedfoodlist[typeone, ]
head(typeone)
typetwoin <- grep("mian$", classifiedfoodlist[,2])
typetwo <- classifiedfoodlist[typetwo, ]
head(typetwo)
typethreein <- grep("mianbao|dangao$", classifiedfoodlist[,2])
typethree <- classifiedfoodlist[typethree, ]
head(typethree)
typefourin <- grep("bing$", classifiedfoodlist[,2])
typefour <- classifiedfoodlist[typefour, ]
head(typefour)
typefour <- classifiedfoodlist[typefourin, ]
head(typefour)
typefivein <- grep("mi$", classifiedfoodlist[,2])
typefive <- classifiedfoodlist[typefivein, ]
head(typefive)
typefive
typefivein <- grep("chaomi$", classifiedfoodlist[,2])
typefive <- classifiedfoodlist[typefivein, ]
typefive
notype <- classifiedfoodlist[-c(typeonein,typetwoin,typethreein,typefourin,typefivein),]
notype
typesixin <- grep("zhou$", classifiedfoodlist[,2])
typesix <- classifiedfoodlist[typesixin, ]
typesix
notype <- classifiedfoodlist[-c(typeonein,typetwoin,typethreein,typefourin,typefivein,typesixin),]
notype
typesixin <- grep("zhou|zhou1$", classifiedfoodlist[,2])
typesix <- classifiedfoodlist[typesixin, ]
typesix
notype <- classifiedfoodlist[-c(typeonein,typetwoin,typethreein,typefourin,typefivein,typesixin),]
notype
install.packages("doparallel")
install.packages("doParallel")
install.packages("forecast")
